/* ===== What We Do ===== */
.whatwedo-section {
  color: var(--bs-body-color, var(--text, #212529));

  /* --- Tabs (Bootstrap) --- */
  .whatwedo-tabs {
    /* espacio entre tabs y contenido */
    margin-bottom: .75rem;

    .nav-link {
      /* accesibilidad: foco visible */
      &:focus-visible {
        outline: 2px solid var(--bs-primary, #0d6efd);
        outline-offset: 2px;
      }

      /* transiciones solo si hay hover y el usuario no reduce movimiento */
      @media (prefers-reduced-motion: no-preference) {
        @media (hover: hover) {
          transition: background-color .2s ease, color .2s ease, box-shadow .2s ease;
        }
      }

      /* estado activo con buen contraste en ambos temas */
      &.active {
        color: var(--bs-emphasis-color, var(--text, currentColor));
        background-color: var(--bs-tertiary-bg, rgba(0,0,0,.03));
        box-shadow: inset 0 -2px 0 var(--bs-primary, #0d6efd);
      }
    }

    /* indicadores accesibles si usas nav-tabs "clásicos" */
    &.nav-tabs {
      border-color: var(--bs-border-color, rgba(0,0,0,.125));
      .nav-link {
        border-color: transparent;
        &.active {
          border-color: var(--bs-border-color, rgba(0,0,0,.125)) var(--bs-border-color, rgba(0,0,0,.125)) transparent;
        }
      }
    }
  }

  /* --- Iconos del bloque --- */
  .whatwedo-icon {
    /* usa currentColor para heredar y permitir overrides por contexto */
    color: var(--bs-primary, #0d6efd);
    inline-size: 1.25em;
    block-size: 1.25em;
    flex: 0 0 auto;
  }

  /* --- Cards de contenido --- */
  .card {
    background: var(--bs-card-bg, var(--card-bg, #fff));
    border: 1px solid var(--bs-border-color, var(--card-border, rgba(0,0,0,.12)));
    border-radius: var(--bs-border-radius-lg, .75rem);
    box-shadow: var(--elev-shadow, 0 1px 2px rgba(0,0,0,.06));
    will-change: transform;

    /* transiciones solo en entorno apto */
    @media (prefers-reduced-motion: no-preference) {
      @media (hover: hover) {
        transition: transform .2s ease, box-shadow .2s ease;
        &:hover {
          transform: translateY(-2px);
          box-shadow: 0 .5rem 1.25rem rgba(0,0,0,.08);
        }
      }
    }

    /* si la card es interactiva */
    &.whatwedo-card--clickable {
      cursor: pointer;
      text-decoration: none;
      color: inherit;

      &:focus-visible {
        outline: 2px solid var(--bs-primary, #0d6efd);
        outline-offset: 3px;
      }

      &:active {
        transform: translateY(0); /* feedback al presionar */
      }
    }
  }

  /* --- Tipografía de métricas o encabezados dentro de cards --- */
  .whatwedo-kpi {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum" 1, "lnum" 1;
    line-height: 1;
  }
}

/* Tema oscuro: mejor contraste para el tab activo y bordes */
[data-theme="dark"] .whatwedo-section {
  .whatwedo-tabs .nav-link.active {
    background-color: rgba(255,255,255,.07);
    box-shadow: inset 0 -2px 0 var(--bs-primary, #6ea8fe);
  }
}

/* Alto contraste: refuerza foco y bordes */
@media (prefers-contrast: more) {
  .whatwedo-section {
    .whatwedo-tabs .nav-link.active {
      box-shadow: inset 0 -3px 0 currentColor;
    }
    .card {
      border-color: currentColor;
      box-shadow: 0 0 0 2px currentColor inset;
    }
  }
}

/* Reduce motion: no animaciones */
@media (prefers-reduced-motion: reduce) {
  .whatwedo-section {
    .whatwedo-tabs .nav-link,
    .card {
      transition: none !important;
      transform: none !important;
    }
  }
}
